(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["dx-novel"],{"03ef":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"register"},[n("div",{staticClass:"user-info"},[n("div",{staticClass:"body"},[n("p",[n("span",[e._v("司机：")]),n("span",[e._v(e._s(e.info.driver))])]),n("p",[n("span",[e._v("司机联系方式：")]),n("span",[e._v(e._s(e.info.driver_tel))])])])]),n("div",{staticClass:"btn-group"},[n("dx-button",{attrs:{type:"primary"},on:{click:e.callNum}},[e._v("联系司机")]),n("dx-button",{attrs:{type:"info"},on:{click:function(t){return e.$router.back()}}},[e._v("返 回")])],1)])},a=[],i=(n("96cf"),n("1da1")),c=n("7550"),s={name:"traffic",activated:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getTraffic();case 2:case"end":return t.stop()}}),t)})))()},data:function(){return{info:{driver:"",driver_tel:""}}},methods:{getTraffic:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["d"])();case 2:n=t.sent,e.info=n.data.data;case 4:case"end":return t.stop()}}),t)})))()},callNum:function(){this.info.driver_tel?this.$yb.phone_fun(this.info.driver_tel):alert("没有获取到电话")}}},o=s,u=(n("7145"),n("2877")),l=Object(u["a"])(o,r,a,!1,null,"28808210",null);t["default"]=l.exports},"056d":function(e,t,n){"use strict";var r=n("20e6"),a=n.n(r);a.a},"20e6":function(e,t,n){},3400:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"novel-layout"},[n("keep-alive",[n("router-view")],1)],1)},a=[],i={name:"novel-layout"},c=i,s=(n("056d"),n("2877")),o=Object(s["a"])(c,r,a,!1,null,"08122b80",null);t["default"]=o.exports},"35a0":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"register"},[n("div",{staticClass:"user-info"},[n("div",{staticClass:"header",class:e.passColor},[e._v("返校信息-"+e._s(e.info.pass))]),n("div",{staticClass:"body"},[n("p",[n("span",[e._v("姓名：")]),n("span",[e._v(e._s(e.info.name)+"（"+e._s(e.info.code)+"）")])]),n("p",[n("span",[e._v("学院：")]),n("span",[e._v(e._s(e.info.department))])]),n("p",[n("span",[e._v("班级：")]),n("span",[e._v(e._s(e.info.class_name))])]),n("p",[n("span",[e._v("校区：")]),n("span",[e._v(e._s(e.info.campus))]),n("span",[e._v(" 宿舍：")]),n("span",[e._v(e._s(e.info.building)+"栋"+e._s(e.info.dorm)+"室")])]),n("p",[n("span",[e._v("抵桂时间：")]),n("span",[e._v(e._s(e.info.arrival))])]),n("p",[n("span",[e._v("交通信息：")]),n("span",[e._v(e._s(e.info.traffic))])]),n("p",[n("span",[e._v("到校登记：")]),n("span",[e._v(e._s(e.info.register))])])])]),"已通过"===e.info.pass?n("p",{staticClass:"confirm-info"},[e._v("选择确认到校登记方式")]):e._e(),n("div",{staticClass:"btn-group"},["已通过"===e.info.pass?n("dx-button",{attrs:{type:"primary"},on:{click:e.confirmLocation}},[e._v("到校登记")]):e._e(),n("dx-button",{attrs:{type:"info"},on:{click:function(t){return e.$router.back()}}},[e._v("返 回")])],1),n("p",{staticClass:"confirm-info"},[e._v("防截图")]),e._m(0)])},a=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"spinner"},[n("div"),n("div"),n("div"),n("div"),n("div"),n("div"),n("div"),n("div"),n("div")])}],i=(n("d3b7"),n("96cf"),n("1da1")),c=n("7550"),s=n("fa7d"),o={name:"register",activated:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.toast=e.$createToast({txt:"定位中...",mask:!0,time:0}),t.next=3,e.getRegisterInfo();case 3:case"end":return t.stop()}}),t)})))()},data:function(){return{baiduVisible:!1,toast:null,info:{name:"",code:"",department:"",class_name:"",campus:"",arrival:"",traffic:"",building:"",dorm:"",register:"未登记到校",pass:"未通过",car:""},polygonPaths:[{campus:"雁山校区",paths:[{lng:110.304344,lat:25.106253},{lng:110.304344,lat:25.093197},{lng:110.284078,lat:25.093197},{lng:110.284078,lat:25.106253}]},{campus:"育才校区",paths:[{lng:110.337563,lat:25.274035},{lng:110.337563,lat:25.267614},{lng:110.328221,lat:25.267614},{lng:110.328221,lat:25.274035}]},{campus:"王城校区",paths:[{lng:110.304236,lat:25.290853},{lng:110.307901,lat:25.290118},{lng:110.307021,lat:25.285086},{lng:110.303302,lat:25.285609}]}],number:null,column1:[{text:"网约车",value:"网约车"},{text:"出租车",value:"出租车"},{text:"交通专线",value:"交通专线"},{text:"自驾",value:"自驾"},{text:"自行车",value:"自行车"},{text:"走路",value:"走路"},{text:"公交车",value:"公交车"}]}},computed:{passColor:function(){return{"bg-danger":"未通过"===this.info.pass||"公交车"===this.info.car,"bg-warning":"审核中"===this.info.pass,"bg-success":"已通过"===this.info.pass}}},methods:{getRegisterInfo:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(c["c"])();case 3:n=t.sent,e.info=n.data.data,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},confirmLocation:function(){var e=this;"公交车"!==this.info.car?"未登记到校"===this.info.register?this.$createActionSheet({title:"选择登记方式",active:0,data:[{content:"易班定位"},{content:"执勤点确认"}],onSelect:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(n,r){var a,s,o,u,l,p,f,d,m;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!==r){t.next=30;break}return t.prev=1,e.toast.show(),t.next=5,e.$yb.location();case 5:return a=t.sent,s=a.longitude,o=a.latitude,u=a.address,l={lng:s,lat:o},t.next=10,Object(c["e"])(l);case 10:if(p=t.sent,f=p.data.data,0!==f.status){t.next=16;break}d={lng:f.result[0].x,lat:f.result[0].y},t.next=19;break;case 16:return alert("GPS坐标转换失败"),e.toast.hide(),t.abrupt("return");case 19:e.toast.hide(),m={longitude:d.lng,latitude:d.lat,address:u},e.showLocate(m),t.next=28;break;case 24:t.prev=24,t.t0=t["catch"](1),alert(t.t0),e.toast.hide();case 28:t.next=31;break;case 30:1===r&&e.$createDialog({type:"prompt",title:"执勤点密码",content:"输入时请不要给学生看到",prompt:{value:"",placeholder:"请输入执勤点密码"},onConfirm:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(n,r){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(7!==r.length||"5846412"!==r){t.next=7;break}return t.next=3,Object(c["a"])({longitude:"000",latitude:"000",address:"广西师范大学",car:"执勤点协助",number:r});case 3:a=t.sent,e.info=a.data.data,t.next=8;break;case 7:alert("密码错误");case 8:case"end":return t.stop()}}),t)})));function n(e,n){return t.apply(this,arguments)}return n}()}).show();case 31:case"end":return t.stop()}}),t,null,[[1,24]])})));function n(e,n){return t.apply(this,arguments)}return n}(),onCancel:function(){}}).show():this.$createDialog({type:"alert",title:"系统提示",content:"您已登记到校，请不要重复登记",icon:"cubeic-alert"}).show():this.$createDialog({type:"alert",title:"系统提示",content:"由于您通过乘坐公交车返回学校，到校登记功能被系统锁定，请联系辅导员说明情况。",icon:"cubeic-close"}).show()},confirmBackCampus:function(e,t,n){var r=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var i,s,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(i=r.info.car,"公交车"!==i){a.next=3;break}return a.abrupt("return");case 3:if(null!==i&&""!==i){a.next=9;break}return a.next=6,r.updateCar(i);case 6:i=a.sent,a.next=12;break;case 9:return a.next=11,r.confirmCar(i);case 11:i=a.sent;case 12:if(r.info.car=i,"公交车"!==i){a.next=19;break}return a.next=16,Object(c["b"])();case 16:return a.next=18,r.getRegisterInfo();case 18:return a.abrupt("return");case 19:if("网约车"!==i&&"出租车"!==i&&"交通专线"!==i&&"自驾"!==i){a.next=25;break}return a.next=22,r.confirmCarNumber();case 22:s=a.sent,a.next=26;break;case 25:s=i;case 26:return a.next=28,Object(c["a"])({longitude:e,latitude:t,address:n,car:i,number:s});case 28:o=a.sent,r.info=o.data.data;case 30:case"end":return a.stop()}}),a)})))()},confirmCar:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n,r){t.$createDialog({type:"confirm",title:"请确认您的抵桂返校交通工具",content:e,confirmBtn:{text:"确认交通方式",active:!0,disabled:!1,href:"javascript:;"},cancelBtn:{text:"修改",active:!1,disabled:!1,href:"javascript:;"},onConfirm:function(){return n(e)},onCancel:function(){return n(t.updateCar(e))}}).show()})));case 1:case"end":return n.stop()}}),n)})))()},updateCar:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n,r){t.$createPicker({title:"抵桂返校交通工具",data:[t.column1],onSelect:function(e,r,a){return n(t.confirmCar(e[0]))},onCancel:function(){return n(t.confirmCar(e))}}).show()})));case 1:case"end":return n.stop()}}),n)})))()},confirmCarNumber:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){e.$createDialog({type:"prompt",title:"返校乘车车牌号",content:"完整车牌号，例如：桂C12345",prompt:{value:"",placeholder:"请输入您返校时乘坐车辆的车牌号"},cancelBtn:{text:"忘记了",active:!1,disabled:!1,href:"javascript:;"},onConfirm:function(n,r){return r.length>=6?t(r):(alert("车牌号格式错误，请重新输入"),t(e.confirmCarNumber()))},onCancel:function(){return t("忘记车牌")}}).show()})));case 1:case"end":return t.stop()}}),t)})))()},showLocate:function(e){for(var t=this,n=e.longitude,r=e.latitude,a=e.address,i={lng:n,lat:r},c=0;c<this.polygonPaths.length;c++){for(var o=this.polygonPaths[c].paths,u=[],l=0;l<o.length;l++)u.push({lng:o[l].lng,lat:o[l].lat});if(Object(s["b"])(i,u))return void this.$createDialog({type:"confirm",title:this.polygonPaths[c].campus,content:a,icon:"cubeic-alert",confirmBtn:{text:"确认位置",active:!0,disabled:!1,href:"javascript:;"},cancelBtn:{text:"重新定位",active:!1,disabled:!1,href:"javascript:;"},onConfirm:function(){t.confirmBackCampus(n,r,a)},onCancel:function(){}}).show()}this.$createDialog({type:"alert",title:"位置错误",content:"您不在三个校区附近，请尝试重新定位或请联系执勤老师、学院管理员，或联系技术人员解决：chenzhtbb@qq.com",icon:"cubeic-close"}).show()}}},u=o,l=(n("fe98"),n("2877")),p=Object(l["a"])(u,r,a,!1,null,"015c654b",null);t["default"]=p.exports},4876:function(e,t,n){"use strict";var r=n("f6fc"),a=n.n(r);a.a},"57df":function(e,t,n){},7145:function(e,t,n){"use strict";var r=n("dec5"),a=n.n(r);a.a},"785c":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"report"},[n("dx-form",{ref:"form",attrs:{title:"广西师范大学晨午间健康报告",description:"为学校疫情防控需要，以及您的个人身体健康，请您如实测量体温并填写信息。\n          每日晨报：07：00-10：00\n          每日午报：12：00-15：00",schema:e.schema},on:{submit:e.handleSubmit}}),n("result",{attrs:{data:e.data,visible:e.visible},on:{close:function(t){e.visible=!1}}})],1)},a=[],i=(n("d3b7"),n("acd8"),n("96cf"),n("1da1")),c=n("7550"),s=n("8992"),o={name:"report",components:{Result:s["a"]},data:function(){return{schema:[{label:"体温",type:"dx-input",model:"temperature",props:{placeholder:"填写您的体温",type:"number",maxlength:5,clearable:!0},valid:{required:!0}},{label:"备注",type:"dx-textarea",model:"remark",props:{placeholder:"如果您身体状况欠佳请填写备注",autoExpand:!0,maxlength:255},valid:{required:!1}}],visible:!1,data:{name:"",temperature:0,err:0,date:"",time:0}}},activated:function(){return Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(c["f"])();case 3:t=e.sent,t.data.data.url,e.next=9;break;case 7:e.prev=7,e.t0=e["catch"](0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))()},methods:{handleSubmit:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,a,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.temperature,a=e.remark,n.prev=1,n.next=4,t.checkTemperature(r);case 4:if(i=n.sent,i){n.next=7;break}return n.abrupt("return");case 7:return t.$refs.form.start(),n.next=10,t.$store.dispatch("ReportHealth",{temperature:r,remark:a});case 10:t.data=n.sent,t.visible=!0,n.next=17;break;case 14:n.prev=14,n.t0=n["catch"](1),console.log(n.t0);case 17:return n.prev=17,t.$refs.form.end(),n.finish(17);case 20:case"end":return n.stop()}}),n,null,[[1,14,17,20]])})))()},checkTemperature:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e=parseFloat(e||0),n.abrupt("return",new Promise((function(n,r){if(parseFloat(e)<37.3&&parseFloat(e)>=35)return n(!0);var a="您的体温：".concat(e,"度，高于37.3度，属发热，请再次确认体温后提交");parseFloat(e)<35&&(a="您的体温：".concat(e,"度，较低，请再次确认体温后提交")),t.$createDialog({type:"confirm",title:"体温异常",content:a,confirmBtn:{text:"确认体温",active:!0,disabled:!1,href:"javascript:;"},cancelBtn:{text:"修改",active:!1,disabled:!1,href:"javascript:;"},onConfirm:function(){return n(!0)},onCancel:function(){return n(!1)}}).show()})));case 2:case"end":return n.stop()}}),n)})))()}}},u=o,l=(n("cc09"),n("2877")),p=Object(l["a"])(u,r,a,!1,null,"3def435f",null);t["default"]=p.exports},8992:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"bottomSlide"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.visible&&!e.close,expression:"visible && !close"}],staticClass:"novel-result"},[n("div",{staticClass:"icon cubeic-right success"}),n("p",{staticClass:"tip"},[e._v(e._s(e.data.name)+"本次上报体温"+e._s(e.data.temperature)+"度")]),n("p",{staticClass:"time"},[e._v(e._s(e.data.date))]),n("p",{staticClass:"time",staticStyle:{color:"#aaa"}},[e._v("您可以保存此截图作为本次上报体温凭证")]),n("p",{staticClass:"time",staticStyle:{color:"#ccc"}},[e._v(e._s(e.data.time))]),n("dx-button",{on:{click:e.handleBack}},[e._v("返 回")])],1)])},a=[],i=(n("ac1f"),n("5319"),n("96cf"),n("1da1")),c=n("7550"),s="close",o={name:"novel-result",props:{visible:{type:Boolean,default:!1},data:{type:Object,default:function(){return{name:"",temperature:40,err:0,date:"",time:0}}}},data:function(){return{close:!1}},methods:{handleFever:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.handleClose(e),n.next=3,t.$router.replace({name:"novel-fever"});case 3:case"end":return n.stop()}}),n)})))()},handleReedit:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(c["g"])();case 2:t.handleClose(e);case 3:case"end":return n.stop()}}),n)})))()},handleClose:function(e){this.close=!0,this.$emit(s,e)},handleBack:function(e){this.handleClose(e),this.$router.back()}},watch:{visible:function(e){e&&(this.close=!1)}}},u=o,l=(n("ab67"),n("2877")),p=Object(l["a"])(u,r,a,!1,null,"6ecaaa7f",null);t["a"]=p.exports},a7c4:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"fever"},[n("dx-form",{ref:"form",attrs:{title:"广西师范大学学生发热情况跟踪表",description:"您属于发热，请配合学校疫情防控工作并如实填写此表。填写完毕后请及时联系辅导员！",schema:e.schema},on:{submit:e.handleSubmit}})],1)},a=[],i={name:"fever",data:function(){return{schema:[{label:"姓名",type:"dx-input",model:"name",props:{placeholder:"填写您的姓名",type:"number",maxlength:5,clearable:!0},valid:{required:!0}},{label:"学号",type:"dx-input",model:"code",props:{placeholder:"填写您的学号",type:"number",maxlength:5,clearable:!0},valid:{required:!0}},{label:"学院",type:"dx-input",model:"college",props:{placeholder:"填写您的学院",type:"number",maxlength:5,clearable:!0},valid:{required:!0}},{label:"性别",type:"dx-input",model:"sex",props:{placeholder:"填写您的体温",type:"number",maxlength:5,clearable:!0},valid:{required:!0}},{label:"联系电话",type:"dx-input",model:"tel",props:{placeholder:"填写您的联系电话",type:"number",maxlength:5,clearable:!0},valid:{required:!0}},{label:"辅导员",type:"dx-input",model:"teacher",props:{placeholder:"填写您的辅导员",type:"number",maxlength:5,clearable:!0},valid:{required:!0}},{label:"体温",type:"dx-input",model:"temperature",props:{placeholder:"填写您的体温",type:"number",maxlength:5,clearable:!0},valid:{required:!0}}]}},methods:{handleSubmit:function(e){}}},c=i,s=(n("4876"),n("2877")),o=Object(s["a"])(c,r,a,!1,null,"3c882be3",null);t["default"]=o.exports},ab67:function(e,t,n){"use strict";var r=n("e4e7"),a=n.n(r);a.a},b829:function(e,t,n){},cc09:function(e,t,n){"use strict";var r=n("b829"),a=n.n(r);a.a},dec5:function(e,t,n){},e4e7:function(e,t,n){},f6fc:function(e,t,n){},fe98:function(e,t,n){"use strict";var r=n("57df"),a=n.n(r);a.a}}]);